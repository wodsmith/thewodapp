#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Ensure node is in PATH by sourcing common locations
if command -v node >/dev/null 2>&1; then
  npx lint-staged
elif [ -x "$(which node 2>/dev/null)" ]; then
  npx lint-staged
elif [ -f "$HOME/.nvm/nvm.sh" ]; then
  . "$HOME/.nvm/nvm.sh"
  npx lint-staged
elif [ -f "$HOME/.volta/bin/node" ]; then
  export PATH="$HOME/.volta/bin:$PATH"
  npx lint-staged
elif [ -f "/usr/local/bin/node" ]; then
  export PATH="/usr/local/bin:$PATH"
  npx lint-staged
elif [ -f "/opt/homebrew/bin/node" ]; then
  export PATH="/opt/homebrew/bin:$PATH"
  npx lint-staged
else
  echo "Error: Node.js not found. Please ensure Node.js is installed and available in PATH."
  exit 1
fi